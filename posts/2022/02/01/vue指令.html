<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
    <title>Vue指令 | RunHio 的博客 ｜ RunHio Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="个人博客">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.f77d8e52.css" as="style"><link rel="preload" href="/assets/js/app.70cbfe2c.js" as="script"><link rel="preload" href="/assets/js/6.1419a14d.js" as="script"><link rel="preload" href="/assets/js/36.87997eee.js" as="script"><link rel="prefetch" href="/assets/js/10.2e15052e.js"><link rel="prefetch" href="/assets/js/11.9760aa5a.js"><link rel="prefetch" href="/assets/js/12.5dd51cf0.js"><link rel="prefetch" href="/assets/js/13.9cea7209.js"><link rel="prefetch" href="/assets/js/14.a4892ffa.js"><link rel="prefetch" href="/assets/js/15.7e37fdbc.js"><link rel="prefetch" href="/assets/js/16.bfc00efe.js"><link rel="prefetch" href="/assets/js/17.42b751d4.js"><link rel="prefetch" href="/assets/js/18.7d94d9ca.js"><link rel="prefetch" href="/assets/js/19.5bf2dfa4.js"><link rel="prefetch" href="/assets/js/2.ffb60f29.js"><link rel="prefetch" href="/assets/js/20.76be16d6.js"><link rel="prefetch" href="/assets/js/21.d587942b.js"><link rel="prefetch" href="/assets/js/22.0c501fa3.js"><link rel="prefetch" href="/assets/js/23.23075f51.js"><link rel="prefetch" href="/assets/js/24.31b365c9.js"><link rel="prefetch" href="/assets/js/25.c0a22e47.js"><link rel="prefetch" href="/assets/js/26.eb0b9821.js"><link rel="prefetch" href="/assets/js/27.902f48f0.js"><link rel="prefetch" href="/assets/js/28.792bd15b.js"><link rel="prefetch" href="/assets/js/29.1fa1e936.js"><link rel="prefetch" href="/assets/js/3.95e33632.js"><link rel="prefetch" href="/assets/js/30.6289061a.js"><link rel="prefetch" href="/assets/js/31.4caa844a.js"><link rel="prefetch" href="/assets/js/32.469025af.js"><link rel="prefetch" href="/assets/js/33.6c8ad3f6.js"><link rel="prefetch" href="/assets/js/34.a6b6bcf1.js"><link rel="prefetch" href="/assets/js/35.3975429e.js"><link rel="prefetch" href="/assets/js/37.05db4cc6.js"><link rel="prefetch" href="/assets/js/38.8c5a7fbc.js"><link rel="prefetch" href="/assets/js/39.e0da8621.js"><link rel="prefetch" href="/assets/js/4.467972aa.js"><link rel="prefetch" href="/assets/js/40.647a3e55.js"><link rel="prefetch" href="/assets/js/41.98c93d10.js"><link rel="prefetch" href="/assets/js/5.963c915c.js"><link rel="prefetch" href="/assets/js/7.90b85d0e.js"><link rel="prefetch" href="/assets/js/8.2155397b.js"><link rel="prefetch" href="/assets/js/9.ac493e9a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f77d8e52.css">
    <meta id="referrer" name="referrer" content="never" />
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout" data-v-7f2e4136><header class="header-container" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(/post-bg.jpeg);" data-v-93921ff8 data-v-7f2e4136><nav class="navbar" style="position:absolute;opacity:1;transition:all 0.5s ease-in-out;" data-v-93921ff8><a href="/" class="navbar-link router-link-active">
    RunHio'Blog
  </a> <ul class="navbar-links"><li><a href="/" class="router-link-active">
        HOME
      </a></li><li><a href="/about/">
        ABOUT
      </a></li><li><a href="/tags/">
        TAGS
      </a></li></ul> <div id="nav-icon"><span></span><span></span><span></span></div></nav> <div class="header-title" data-v-93921ff8 data-v-93921ff8><h1 data-v-93921ff8>Vue指令</h1> <p data-v-93921ff8></p></div></header> <div class="container" data-v-b3fda33c data-v-7f2e4136><main class="main" style="width:60%;" data-v-b3fda33c><div class="post" data-v-b3fda33c data-v-b3fda33c><article class="main-div"><div class="post-content content content__default"><h2 id="什么是vue指令"><a href="#什么是vue指令" class="header-anchor">#</a> 什么是Vue指令</h2> <p>在Vue中，指令就是指 <strong>特殊的属性。</strong></p> <p>Vue会根据指令，在背后做一些事情，Vue会根据不同的指令执行不同的操作</p> <h2 id="内置指令"><a href="#内置指令" class="header-anchor">#</a> 内置指令</h2> <h3 id="v-text"><a href="#v-text" class="header-anchor">#</a> v-text</h3> <p>用于更新元素的<code>textContent</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>h1 v<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">&quot;msg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
</code></pre></div><p><code>h1</code>元素的内容最终取决于<code>msg</code>的值</p> <p><img src="https://cdn.nlark.com/yuque/0/2022/webp/22799595/1643710191532-66a0d429-02fc-4450-bf4e-ea551b67e4ec.webp" alt="img"></p> <h3 id="v-html"><a href="#v-html" class="header-anchor">#</a> v-html</h3> <p>用于更新元素<code>innerHTML</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div v<span class="token operator">-</span>html<span class="token operator">=</span><span class="token string">&quot;'&lt;h1&gt;Hello LBJ&lt;/h1&gt;'&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p><img src="https://cdn.nlark.com/yuque/0/2022/webp/22799595/1643710223243-9045dfeb-81f2-4a26-a6fc-0e727befd67c.webp" alt="img"></p> <h3 id="v-show-v-if"><a href="#v-show-v-if" class="header-anchor">#</a> v-show&amp;v-if</h3> <p>二者都是用于控制元素的展示和隐藏。</p> <p>但是<code>v-show</code>用于控制元素的<code>display</code>属性，而<code>v-if</code>则是直接进行元素的销毁和展示</p> <h3 id="v-for"><a href="#v-for" class="header-anchor">#</a> v-for</h3> <p>一个用于迭代的指令</p> <h3 id="v-on"><a href="#v-on" class="header-anchor">#</a> v-on</h3> <p>用于给元素绑定事件，缩写<code>@</code></p> <p>修饰符：</p> <ul><li><p>.stop - 调用 event.stopPropagation()</p></li> <li><p>.prevent - 调用 event.preventDefault()</p></li> <li><p>.capture - 添加事件侦听器时使用 capture 模式</p></li> <li><p>.self - 只当事件是从侦听器绑定的元素本身触发时才触发回调</p></li> <li><p>.{keyAlias} - 仅当事件是从特定键触发时才触发回调</p></li> <li><p>.once - 只触发一次回调</p></li> <li><p>.left - 只当点击鼠标左键时触发</p></li> <li><p>.right - 只当点击鼠标右键时触发</p></li> <li><p>.middle - 只当点击鼠标中键时触发</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 停止冒泡 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button @click<span class="token punctuation">.</span>stop<span class="token operator">=</span><span class="token string">&quot;doThis&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div><h3 id="v-model"><a href="#v-model" class="header-anchor">#</a> v-model</h3> <div class="language- extra-class"><pre class="language-text"><code>v-model`限制于`input` `select` `textarea` `components
</code></pre></div><p>修饰符</p> <ul><li><p>lazy 惰性更新，监听change而不是input</p></li> <li><p>number 输入字符串转为有效的数字</p></li> <li><p>trim 去除首位的空格</p></li></ul> <h4 id="语法糖"><a href="#语法糖" class="header-anchor">#</a> 语法糖</h4> <p><code>v-model</code>本质上是一个语法糖</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;test-v-model&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>使用v<span class="token operator">-</span>model<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;msg&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;edit me&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> msg <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>不使用v<span class="token operator">-</span>model<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;msg1&quot;</span> @input<span class="token operator">=</span><span class="token string">&quot;handleInput&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;edit me&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> msg1 <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'test-v-model'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      msg1<span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleInput</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>msg1 <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p><strong>如果</strong><code>v-model</code><strong>绑定的是响应式对象上某个不存在的属性，那么</strong><code>vue</code><strong>会悄悄地增加这个属性，并让它成为响应式。</strong></p> <h4 id="单项数据流"><a href="#单项数据流" class="header-anchor">#</a> 单项数据流</h4> <p>子组件不能改变父组件传递给它的<code>prop</code> 属性，推荐的做法是它抛出事件，通知父组件自行改变绑定的值。</p> <p><code>v-model</code>是双向绑定，是单向数据流。</p> <h2 id="给组件使用v-model"><a href="#给组件使用v-model" class="header-anchor">#</a> 给组件使用v-model</h2> <h3 id="vue2"><a href="#vue2" class="header-anchor">#</a> Vue2</h3> <p>在Vue2中，在组件上使用<code>v-model</code>相当于传递了<code>value</code>属性，触发了<code>input</code>事件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Child v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;msg&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">//以上写法相当于:  </span>
<span class="token operator">&lt;</span>Child <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;msg&quot;</span> @input<span class="token operator">=</span><span class="token string">&quot;msg=$event&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>可以给<code>Child</code>添加<code>model</code>选项，自定义<code>prop</code>和<code>事件名</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 父组件</span>
<span class="token operator">&lt;</span>Child v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;msg&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  
<span class="token comment">//等价于</span>
<span class="token operator">&lt;</span>Child <span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">&quot;msg&quot;</span> @change<span class="token operator">=</span><span class="token string">&quot;msg=$event&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">//子组件Child.vue</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  model<span class="token operator">:</span> <span class="token punctuation">{</span>
    prop<span class="token operator">:</span> <span class="token string">'title'</span><span class="token punctuation">,</span>
    event<span class="token operator">:</span> <span class="token string">'change'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="vue3"><a href="#vue3" class="header-anchor">#</a> Vue3</h3> <p>自定义组件上使用<code>v-model</code>，相当于传递<code>modelValue</code>属性，同时触发<code>update:modelValue</code>事件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Child v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;isVisible&quot;</span><span class="token operator">&gt;</span>  
<span class="token comment">// 相当于</span>
<span class="token operator">&lt;</span>Child <span class="token operator">:</span>modelValue<span class="token operator">=</span><span class="token string">&quot;isVisible&quot;</span> @update<span class="token operator">:</span>modelValue<span class="token operator">=</span><span class="token string">&quot;isVisible=$event&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="例子"><a href="#例子" class="header-anchor">#</a> 例子</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 父组件 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>hello<span class="token operator">-</span>world v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;msg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>hello<span class="token operator">-</span>world<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vue/reactivity&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">&quot;./components/HelloWorld.vue&quot;</span>

<span class="token keyword">const</span> msg<span class="token operator">=</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 子组件 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>modelValue<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;changeInfo&quot;</span><span class="token operator">&gt;</span>click<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">const</span> emmits <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'update:modelValue'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> props<span class="token operator">=</span><span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  modelValue<span class="token operator">:</span>String
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">changeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">emmits</span><span class="token punctuation">(</span><span class="token string">&quot;update:modelValue&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;newHello&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h2 id="自定义指令"><a href="#自定义指令" class="header-anchor">#</a> 自定义指令</h2> <h3 id="钩子"><a href="#钩子" class="header-anchor">#</a> 钩子</h3> <ul><li><p>created：在绑定元素的 attribute 或事件监听器被应用之前调用</p></li> <li><p>beforeMount：当指令第一次绑定到元素并且在挂载父组件之前调用</p></li> <li><p>mounted：在绑定元素的父组件被挂载后调用</p></li> <li><p>beforeUpdate：在更新包含组件的 VNode 之前调用</p></li> <li><p>updated：在包含组件的 VNode及其子组件的 VNode更新后调用</p></li> <li><p>beforeUnmount：在卸载绑定元素的父组件之前调用</p></li> <li><p>unmounted：当指令与元素解除绑定且父组件已卸载时，只调用一次</p></li></ul> <h4 id=""><a href="#" class="header-anchor">#</a></h4> <h3 id="参数"><a href="#参数" class="header-anchor">#</a> 参数</h3> <ul><li><p>el：用于直接操作DOM，表示指令绑定到的元素</p></li> <li><p>binding：包含以下属性</p></li> <li><ul><li>instance：使用指令的组件实例</li> <li>value：传递给指令的值</li></ul></li> <li><ul><li>oldValue：先前的值</li> <li>arg：传递给指令的参数</li></ul></li> <li><ul><li>modifiers：传递给指令的修饰符</li> <li>dir：注册指令时传递的配置对象</li></ul></li></ul> <h3 id="自定义pin指令"><a href="#自定义pin指令" class="header-anchor">#</a> 自定义pin指令</h3> <p>先创建一个文件夹<code>directives</code></p> <p>创建pin指令，表示固定一个元素在右上角</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> pin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//是否要定住</span>
    <span class="token keyword">var</span> pinned <span class="token operator">=</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token comment">//传入的修饰符，表示定在哪里</span>
    <span class="token keyword">var</span> position <span class="token operator">=</span> binding<span class="token punctuation">.</span>modifiers<span class="token punctuation">;</span>
    <span class="token comment">// 传递给指令的参数，可以表示定在的重要度</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> binding<span class="token punctuation">.</span>arg<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pinned<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'fixed'</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>args <span class="token operator">==</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">&quot;pink&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> val <span class="token keyword">in</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>position<span class="token punctuation">[</span>val<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          el<span class="token punctuation">.</span>style<span class="token punctuation">[</span>val<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'10px'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'static'</span><span class="token punctuation">;</span>
      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> pin
</code></pre></div><p>创建index.js</p> <p>Install方法中传递的app是Vue实例，调用directive方法，注册指令名和对应的操作</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> pin <span class="token keyword">from</span> <span class="token string">'./pin'</span>
<span class="token keyword">const</span> directives <span class="token operator">=</span> <span class="token punctuation">{</span>
    pin
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>directives<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> directives<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在main中调用use，调用install方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> Directives <span class="token keyword">from</span> <span class="token string">'./directives'</span>


<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Directives<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>使用效果</strong></p> <p><img src="https://cdn.nlark.com/yuque/0/2022/webp/22799595/1643712777926-8c34d0c1-8d25-4629-a574-1f3acd242fa9.webp" alt="img"></p> <p><img src="https://cdn.nlark.com/yuque/0/2022/webp/22799595/1643712784919-bad4f98c-c44f-4de9-94ce-49f93c25a79c.webp" alt="img"></p> <h3 id="自定义防抖指令"><a href="#自定义防抖指令" class="header-anchor">#</a> 自定义防抖指令</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> debounce<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>binding</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> timer
        el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>

            timer<span class="token operator">=</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                binding<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> debounce
</code></pre></div></div></article> <div class="main-div vssue"><!----></div></div></main> <aside class="aside" data-v-b3fda33c data-v-b3fda33c><div class="info-card main-div" data-v-1311ce9e data-v-b3fda33c><div class="info-card-header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(/bg2.jpg);" data-v-1311ce9e><img src="/avatar-top.jpeg" alt="RunHio" class="info-avatar" data-v-1311ce9e></div> <div class="info-card-body" data-v-1311ce9e><section class="info-name" data-v-1311ce9e>
      RunHio
    </section> <section class="info-desc" data-v-1311ce9e>Record Growth</section> <section class="info-contact" data-v-1311ce9e><section data-v-1311ce9e><span data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:1em;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-location" data-v-1311ce9e data-v-1311ce9e></use></svg><span class="info-text" data-v-1311ce9e data-v-1311ce9e>
          Guangzhou, China
        </span></span></section> <!----> <section data-v-1311ce9e><span data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:1em;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-email" data-v-1311ce9e data-v-1311ce9e></use></svg><span class="info-text" data-v-1311ce9e data-v-1311ce9e>
          1056333479@qq.com
        </span></span></section></section></div> <div class="info-card-footer" data-v-1311ce9e><p class="footer-sns-link" data-v-1311ce9e><a target="_blank" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-csdn" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a><a target="_blank" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-weibo" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a><a target="_blank" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-juejin" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a><a target="_blank" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-zhihu" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a><a target="_blank" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-github" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a></p></div></div> <div class="post-toc main-div aside-toc" style="position:relative;top:0;width:0px;" data-v-b3fda33c><h4>- CATALOG</h4> <div class="post-nav-toc"><ul><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#什么是vue指令">什么是Vue指令</a></li><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#内置指令">内置指令</a><ul><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#v-text">v-text</a></li><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#v-html">v-html</a></li><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#v-show-v-if">v-show&amp;v-if</a></li><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#v-for">v-for</a></li><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#v-on">v-on</a></li><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#v-model">v-model</a></li></ul></li><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#给组件使用v-model">给组件使用v-model</a><ul><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#vue2">Vue2</a></li><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#vue3">Vue3</a></li></ul></li><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#自定义指令">自定义指令</a><ul><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#钩子">钩子</a></li><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#参数">参数</a></li><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#自定义pin指令">自定义pin指令</a></li><li><a href="/posts/2022/02/01/vue%E6%8C%87%E4%BB%A4.html#自定义防抖指令">自定义防抖指令</a></li></ul></li></ul></div></div></aside></div> <footer class="footer" data-v-7f2e4136><p class="footer-sns-link"><a target="_blank" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-csdn"></use></svg></span></a><a target="_blank" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-weibo"></use></svg></span></a><a target="_blank" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-juejin"></use></svg></span></a><a target="_blank" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-zhihu"></use></svg></span></a><a target="_blank" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-github"></use></svg></span></a></p> <div class="copyright"><span id="custom">Copyright &copy; RunHio Blog 2021 <br /> </span> <!----></div></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.70cbfe2c.js" defer></script><script src="/assets/js/6.1419a14d.js" defer></script><script src="/assets/js/36.87997eee.js" defer></script>
  </body>
</html>